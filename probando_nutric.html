      <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>prbando</title>

    <link rel="website icon" href="../Images/Icono_veganimo.svg">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Iconos de Phosphor -->
    <link rel="stylesheet" href="https://unpkg.com/@phosphor-icons/web@2.0.3/src/phosphor.css">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&family=Gloock&display=swap" rel="stylesheet" />

    <!-- SweetAlert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="/style_perfil_usuario.css"> <!-- Estilos para el perfil de usuario --> 
    <link rel="stylesheet" href="/Perfil_nutricional/css/style_crear_pnutric.css">
    <link rel="stylesheet" href="/Perfil_nutricional/css/style_crear_pnutric_planes.css"> <!-- Estilos la seccion 7 en delante -->
    <link rel="stylesheet" href="/Perfil_nutricional/css/style_crear_pnutric_s8pago.css"> <!-- Estilos la seccion 8 pago -->
    <link rel="stylesheet" href="/Perfil_nutricional/css/style_cpnutric_barra_prog.css"> <!-- Barras de progreso -->

</head>
      
      <div class="crear_perfil">

        <div class="tarjeta-crear-perf">
            <form  class="form-container" id="form-crear-perfil"> 

                <!-- Sección 9: Agradecimientos -->
              <div class="section_" id="section">

                <h1 class="main-title">Gracias por suscribirte a tu plan vegano</h1>
                <div class="title-decoration"></div>

                <h2 class="section-tanks" style=" margin-bottom: 40px;">
                    Estamos felices de acompañarte en tu camino hacia una alimentación saludable y consciente.  <br><br>

                    Tu plan vegano está disponible, lleno de recetas, tips y estrategias para disfrutar de cada paso hacia tu bienestar.
                </h2>

                
                <button id="btn_empezar_plan">
                Comencemos
                <div class="star-1">
                    <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xml:space="preserve"
                    version="1.1"
                    style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                    viewBox="0 0 784.11 815.53"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    >
                    <defs></defs>
                    <g id="Layer_x0020_1">
                        <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                        <path
                        class="fil0"
                        d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                        ></path>
                    </g>
                    </svg>
                </div>
                <div class="star-2">
                    <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xml:space="preserve"
                    version="1.1"
                    style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                    viewBox="0 0 784.11 815.53"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    >
                    <defs></defs>
                    <g id="Layer_x0020_1">
                        <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                        <path
                        class="fil0"
                        d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                        ></path>
                    </g>
                    </svg>
                </div>
                <div class="star-3">
                    <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xml:space="preserve"
                    version="1.1"
                    style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                    viewBox="0 0 784.11 815.53"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    >
                    <defs></defs>
                    <g id="Layer_x0020_1">
                        <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                        <path
                        class="fil0"
                        d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                        ></path>
                    </g>
                    </svg>
                </div>
                <div class="star-4">
                    <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xml:space="preserve"
                    version="1.1"
                    style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                    viewBox="0 0 784.11 815.53"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    >
                    <defs></defs>
                    <g id="Layer_x0020_1">
                        <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                        <path
                        class="fil0"
                        d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                        ></path>
                    </g>
                    </svg>
                </div>
                <div class="star-5">
                    <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xml:space="preserve"
                    version="1.1"
                    style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                    viewBox="0 0 784.11 815.53"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    >
                    <defs></defs>
                    <g id="Layer_x0020_1">
                        <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                        <path
                        class="fil0"
                        d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                        ></path>
                    </g>
                    </svg>
                </div>
                <div class="star-6">
                    <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xml:space="preserve"
                    version="1.1"
                    style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                    viewBox="0 0 784.11 815.53"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    >
                    <defs></defs>
                    <g id="Layer_x0020_1">
                        <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                        <path
                        class="fil0"
                        d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                        ></path>
                    </g>
                    </svg>
                </div>
                </button>


                  <!-- Progreso -->
                  <div class="progress-container9">
                    <div class="progress-step9 active9"></div>
                    <div class="progress-line9"></div>
                    <div class="progress-step9 active9"></div>
                    <div class="progress-line9"></div>
                    <div class="progress-step9 active9"></div>
                    <div class="progress-line9"></div>
                    <div class="progress-step9 active9"></div>
                    <div class="progress-line9"></div>
                    <div class="progress-step9 active9"></div>
                    <div class="progress-line9"></div>
                    <div class="progress-step9 active9"></div>
                    <div class="progress-line9"></div>
                    <div class="progress-step9 active9"></div>
                    <div class="progress-line9"></div>
                    <div class="progress-step9 active9"></div>
                    <div class="progress-line9"></div>
                    <div class="progress-step9 active9"></div>
                    
                    
                  </div>

              </div>
            </form>
            </div>
        </div>

        
      <!-- /scripts individuales -->
      <script src="/perfil_nutric_popup.js"></script> <!-- /perfil_nutric_popup.js  no eliminar -->
      <script src="/Perfil_nutricional/crear_perfil_nutric.js"></script>
      <script src="validaciones.js"></script>
      <script src="/Perfil_nutricional/js/validacion_s_tarjeta_credito.js"></script> <!-- seccion Tarjeta credito -->

 

      <script>
      document.addEventListener('DOMContentLoaded', function() {
          // Verificar sesión primero
          fetch('../Login/check_session.php')
              .then(response => {
                  if (!response.ok) throw new Error('Error de red');
                  return response.json();
              })
              .then(sessionData => {
                  if (!sessionData.logged_in) {
                      throw new Error('Usuario no autenticado');
                  }
                  
                  // Obtener datos del usuario si hay sesión
                  return fetch('obtener_usuario.php');
              })
              .then(response => {
                  if (!response.ok) throw new Error('Error al obtener datos');
                  return response.json();
              })
              .then(data => {
                  if (data.success) {
                      // Llenar campos readonly
                      const nombreInput = document.querySelector('input[name="nombre_completo"]');
                      const fechaInput = document.querySelector('input[name="fecha_nacimiento"]');
                      const generoInput = document.querySelector('input[name="genero"]');
                      
                      if (nombreInput) nombreInput.value = data.usuario.nombre_completo || '';
                      if (fechaInput) fechaInput.value = data.usuario.fecha_nacimiento || '';
                      
                      if (generoInput && data.usuario.genero) {
                          generoInput.value = data.usuario.genero;
                      }
                  } else {
                      showError('Error al cargar datos: ' + (data.message || 'Error desconocido'));
                  }
              })
              .catch(error => {
                  console.error('Error:', error);
                  showError('Error al cargar datos del usuario. Por favor recarga la página.');
                  
                  if (error.message.includes('autenticado')) {
                      setTimeout(() => {
                          window.location.href = '/Login/login.html';
                      }, 3000);
                  }
              });

          function showError(message) {
              Swal.fire({
                  toast: true,
                  position: 'bottom-end',
                  icon: 'error',
                  title: message,
                  showConfirmButton: false,
                  timer: 3000
              });
          }

          
      });





      </script>


      <style>/* Etiqueta en verde suave cuando se selecciona */
      .custom-select-options label.selected {
        background-color: #e0f6e9;
        border-radius: 5px;
        padding: 4px;
        display: block;
      }

      /* Contenedor de etiquetas tipo 'chips' */
      .selected-tags {
        margin-top: 10px;
        display: flex;
        flex-wrap: wrap;
        gap: 4px;          /* Menor espacio entre etiquetas */
        font-size: 10px;    /* Tamaño base pequeño para las etiquetas */
      }

      /* Estilo visual de cada etiqueta */
      .selected-tag {
        background-color: #e0f6e9;
        color: #007848;
        border: 1px solid #b2e3c4;
        border-radius: 15px;
        padding: 2px 6px;      /* Más compacto */
        font-size: inherit;    /* Hereda tamaño del contenedor */
        display: flex;
        align-items: center;
      }

      /* Botón de cierre de la etiqueta */
      .selected-tag .remove-tag {
        margin-left: 4px;
        cursor: pointer;
        font-weight: bold;
        color: #007848;
      }

      .dieta-descripcion {
          font-size: 0.9em;
          transition: all 0.3s ease;
          margin-top: 5px;
          padding: 5px;
          border-radius: 4px;
          background-color: #f8f9fa;
      }

      </style>

      <style>
        /* Botón Volver */
      .back-button {
          position: fixed;
          top: 18px;
          left: 20px;
          background-color: #E0FFF2;
          border: none;
          border-radius: 50px;
          padding: 10px 20px;
          display: flex;
          align-items: center;
          font-family: 'Comfortaa', cursive;
          font-size: 16px;
          color: #1A1C1C;
          box-shadow: inset 0 0 8px #007848;
          cursor: pointer;
          z-index: 1000;
      }

      .back-button .icon {
          width: 10px;
          height: 17px;
          background-color: #0E9863;
          clip-path: polygon(0 50%, 100% 0, 100% 100%);
          margin-right: 8px;
      }
      </style>