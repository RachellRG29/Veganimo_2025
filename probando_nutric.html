<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>prbando</title>

  <link rel="website icon" href="../Images/Icono_veganimo.svg" />

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Iconos de Phosphor -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/@phosphor-icons/web@2.0.3/src/phosphor.css"
  />

  <!-- Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&family=Gloock&display=swap"
    rel="stylesheet"
  />

  <!-- SweetAlert -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- Estilos personalizados -->
  <link rel="stylesheet" href="/style_perfil_usuario.css" />
  <!-- Estilos para el perfil de usuario -->
  <link
    rel="stylesheet"
    href="/Perfil_nutricional/css/style_crear_pnutric.css"
  />
  <link
    rel="stylesheet"
    href="/Perfil_nutricional/css/style_crear_pnutric_planes.css"
  />
  <!-- Estilos la seccion 7 en delante -->
  <link
    rel="stylesheet"
    href="/Perfil_nutricional/css/style_crear_pnutric_s8pago.css"
  />
  <!-- Estilos la seccion 8 pago -->
  <link
    rel="stylesheet"
    href="/Perfil_nutricional/css/style_cpnutric_barra_prog.css"
  />
  <!-- Barras de progreso -->
</head>

<div class="crear_perfil">
  <div class="tarjeta-crear-perf">
    <form class="form-container" id="form-crear-perfil">
      <!-- Secci칩n 9: Agradecimientos -->
      <div class="section_" id="section">
        <div
          class="logo_agradecimientos"
          style="width: 40px"
          ondragstart="return false;"
        >
          <?xml version="1.0" encoding="UTF-8"?>
          <svg
            id="Capa_agrad"
            data-name="Capa 2"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 168.68 199.52"
          >
            <g id="veganimo_agrad">
              <g>
                <path
                  class="cls-1"
                  d="M86.29,80.26c-.7-.61-1.28-1.32-1.77-2.05,3.86,9,7.35,17.37,8.89,21.71l8.39-17.96c-5.41,2.01-11.23,2.03-15.51-1.7Z"
                />
                <path
                  class="cls-1"
                  d="M136.3,0H32.38C14.5,0,0,14.49,0,32.38V167.13c0,17.89,14.5,32.39,32.38,32.39h103.92c17.88,0,32.38-14.5,32.38-32.39V32.38c0-17.89-14.5-32.38-32.38-32.38Zm6.77,33.9c-6.17-.63-10.49,1.22-14.22,4.34-3.91,3.28-5.37,7.22-6.64,10.77-2.46,6.91-3.56,14.68-6.72,21.31-1.54,3.22-4.54,6.39-8.17,8.8l-20.9,44.76h15.89c-1.85-10.13,1.45-20.96,9.71-28.35,7.33-6.55,16.95-8.94,25.92-7.28,1.27,1.45-6.95,10.87-10.25,13.82,3.3-2.95,13.58-10.07,14.89-8.63,.63,9.1-2.8,18.38-10.14,24.94-2.66,2.39-5.63,4.21-8.76,5.5h14.16c3.04,0,5.45,2.6,5.17,5.62-1.57,16.65-10.06,31.28-22.55,41.01-4.3,3.34-9.6,5.13-15.04,5.13-.31,0-.55,.25-.55,.55v2.33c0,1.71-1.39,3.1-3.1,3.1h-34.82c-1.71,0-3.1-1.39-3.1-3.1v-2.33c0-.31-.25-.55-.55-.55h-.25c-5.44,0-10.75-1.79-15.05-5.13-12.49-9.73-20.98-24.36-22.54-41.01-.29-3.02,2.13-5.62,5.16-5.62h23.36c-2.31-.91-4.47-2.3-6.33-4.18-4.77-4.83-6.3-11.64-4.62-17.74,6.13-1.59,12.9,.03,17.67,4.86,4.6,4.66,6.18,11.14,4.8,17.06h14.23L42.97,44.17c-4.22-9.35-8.99-14.02-14.29-14.02h-.45v-1.29h49.92v1.29h-.61c-4.52,0-7.51,1.17-8.98,3.53-1.48,2.36-1.23,5.64,.74,9.84,0,0,6.93,15.5,13.49,30.68,1.45,.76,5.37,.96,6.1,.91,1.77-.12,3.93-.58,5.38-1.45,3.79-2.3,6.64-7.11,7.97-10.94,1.54-4.33,2.59-9.32,4.44-13.83,2.15-5.32,5.27-10.6,10.29-14.42,5.17-4.09,13.11-6.26,20.38-4.16,2.31,.68,4.43,1.79,5.92,3.27l-.2,.32Z"
                />
              </g>
            </g>
          </svg>
        </div>

        <h1 class="main-title">Gracias por suscribirte a tu plan vegano</h1>
        <div class="title-decoration"></div>

        <h2 class="section-tanks" style="margin-bottom: 40px">
          Estamos felices de acompa침arte en tu camino hacia una alimentaci칩n
          saludable y consciente. <br /><br />

          Tu plan vegano est치 disponible, lleno de recetas, tips y estrategias
          para disfrutar de cada paso hacia tu bienestar.
        </h2>

        <button id="btn_empezar_plan">
          Comencemos
          <div class="star-1">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xml:space="preserve"
              version="1.1"
              style="
                shape-rendering: geometricPrecision;
                text-rendering: geometricPrecision;
                image-rendering: optimizeQuality;
                fill-rule: evenodd;
                clip-rule: evenodd;
              "
              viewBox="0 0 784.11 815.53"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <defs></defs>
              <g id="Layer_x0020_1">
                <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                <path
                  class="fil0"
                  d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                ></path>
              </g>
            </svg>
          </div>
          <div class="star-2">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xml:space="preserve"
              version="1.1"
              style="
                shape-rendering: geometricPrecision;
                text-rendering: geometricPrecision;
                image-rendering: optimizeQuality;
                fill-rule: evenodd;
                clip-rule: evenodd;
              "
              viewBox="0 0 784.11 815.53"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <defs></defs>
              <g id="Layer_x0020_1">
                <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                <path
                  class="fil0"
                  d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                ></path>
              </g>
            </svg>
          </div>
          <div class="star-3">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xml:space="preserve"
              version="1.1"
              style="
                shape-rendering: geometricPrecision;
                text-rendering: geometricPrecision;
                image-rendering: optimizeQuality;
                fill-rule: evenodd;
                clip-rule: evenodd;
              "
              viewBox="0 0 784.11 815.53"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <defs></defs>
              <g id="Layer_x0020_1">
                <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                <path
                  class="fil0"
                  d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                ></path>
              </g>
            </svg>
          </div>
          <div class="star-4">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xml:space="preserve"
              version="1.1"
              style="
                shape-rendering: geometricPrecision;
                text-rendering: geometricPrecision;
                image-rendering: optimizeQuality;
                fill-rule: evenodd;
                clip-rule: evenodd;
              "
              viewBox="0 0 784.11 815.53"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <defs></defs>
              <g id="Layer_x0020_1">
                <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                <path
                  class="fil0"
                  d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                ></path>
              </g>
            </svg>
          </div>
          <div class="star-5">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xml:space="preserve"
              version="1.1"
              style="
                shape-rendering: geometricPrecision;
                text-rendering: geometricPrecision;
                image-rendering: optimizeQuality;
                fill-rule: evenodd;
                clip-rule: evenodd;
              "
              viewBox="0 0 784.11 815.53"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <defs></defs>
              <g id="Layer_x0020_1">
                <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                <path
                  class="fil0"
                  d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                ></path>
              </g>
            </svg>
          </div>
          <div class="star-6">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xml:space="preserve"
              version="1.1"
              style="
                shape-rendering: geometricPrecision;
                text-rendering: geometricPrecision;
                image-rendering: optimizeQuality;
                fill-rule: evenodd;
                clip-rule: evenodd;
              "
              viewBox="0 0 784.11 815.53"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <defs></defs>
              <g id="Layer_x0020_1">
                <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                <path
                  class="fil0"
                  d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                ></path>
              </g>
            </svg>
          </div>
        </button>

        <!-- Progreso -->
        <div class="progress-container9">
          <div class="progress-step9 active9"></div>
          <div class="progress-line9"></div>
          <div class="progress-step9 active9"></div>
          <div class="progress-line9"></div>
          <div class="progress-step9 active9"></div>
          <div class="progress-line9"></div>
          <div class="progress-step9 active9"></div>
          <div class="progress-line9"></div>
          <div class="progress-step9 active9"></div>
          <div class="progress-line9"></div>
          <div class="progress-step9 active9"></div>
          <div class="progress-line9"></div>
          <div class="progress-step9 active9"></div>
          <div class="progress-line9"></div>
          <div class="progress-step9 active9"></div>
          <div class="progress-line9"></div>
          <div class="progress-step9 active9"></div>
        </div>
      </div>
    </form>
  </div>
</div>

<!-- /scripts individuales -->
<script src="/perfil_nutric_popup.js"></script>
<!-- /perfil_nutric_popup.js  no eliminar -->
<script src="/Perfil_nutricional/crear_perfil_nutric.js"></script>
<script src="validaciones.js"></script>
<script src="/Perfil_nutricional/js/validacion_s_tarjeta_credito.js"></script>
<!-- seccion Tarjeta credito -->

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Verificar sesi칩n primero
    fetch("../Login/check_session.php")
      .then((response) => {
        if (!response.ok) throw new Error("Error de red");
        return response.json();
      })
      .then((sessionData) => {
        if (!sessionData.logged_in) {
          throw new Error("Usuario no autenticado");
        }

        // Obtener datos del usuario si hay sesi칩n
        return fetch("obtener_usuario.php");
      })
      .then((response) => {
        if (!response.ok) throw new Error("Error al obtener datos");
        return response.json();
      })
      .then((data) => {
        if (data.success) {
          // Llenar campos readonly
          const nombreInput = document.querySelector(
            'input[name="nombre_completo"]',
          );
          const fechaInput = document.querySelector(
            'input[name="fecha_nacimiento"]',
          );
          const generoInput = document.querySelector('input[name="genero"]');

          if (nombreInput)
            nombreInput.value = data.usuario.nombre_completo || "";
          if (fechaInput)
            fechaInput.value = data.usuario.fecha_nacimiento || "";

          if (generoInput && data.usuario.genero) {
            generoInput.value = data.usuario.genero;
          }
        } else {
          showError(
            "Error al cargar datos: " + (data.message || "Error desconocido"),
          );
        }
      })
      .catch((error) => {
        console.error("Error:", error);
        showError(
          "Error al cargar datos del usuario. Por favor recarga la p치gina.",
        );

        if (error.message.includes("autenticado")) {
          setTimeout(() => {
            window.location.href = "/Login/login.html";
          }, 3000);
        }
      });

    function showError(message) {
      Swal.fire({
        toast: true,
        position: "bottom-end",
        icon: "error",
        title: message,
        showConfirmButton: false,
        timer: 3000,
      });
    }
  });
</script>

<style>
  /* Etiqueta en verde suave cuando se selecciona */
  .custom-select-options label.selected {
    background-color: #e0f6e9;
    border-radius: 5px;
    padding: 4px;
    display: block;
  }

  /* Contenedor de etiquetas tipo 'chips' */
  .selected-tags {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 4px; /* Menor espacio entre etiquetas */
    font-size: 10px; /* Tama침o base peque침o para las etiquetas */
  }

  /* Estilo visual de cada etiqueta */
  .selected-tag {
    background-color: #e0f6e9;
    color: #007848;
    border: 1px solid #b2e3c4;
    border-radius: 15px;
    padding: 2px 6px; /* M치s compacto */
    font-size: inherit; /* Hereda tama침o del contenedor */
    display: flex;
    align-items: center;
  }

  /* Bot칩n de cierre de la etiqueta */
  .selected-tag .remove-tag {
    margin-left: 4px;
    cursor: pointer;
    font-weight: bold;
    color: #007848;
  }

  .dieta-descripcion {
    font-size: 0.9em;
    transition: all 0.3s ease;
    margin-top: 5px;
    padding: 5px;
    border-radius: 4px;
    background-color: #f8f9fa;
  }
</style>

<style>
  /* Bot칩n Volver */
  .back-button {
    position: fixed;
    top: 18px;
    left: 20px;
    background-color: #e0fff2;
    border: none;
    border-radius: 50px;
    padding: 10px 20px;
    display: flex;
    align-items: center;
    font-family: "Comfortaa", cursive;
    font-size: 16px;
    color: #1a1c1c;
    box-shadow: inset 0 0 8px #007848;
    cursor: pointer;
    z-index: 1000;
  }

  .back-button .icon {
    width: 10px;
    height: 17px;
    background-color: #0e9863;
    clip-path: polygon(0 50%, 100% 0, 100% 100%);
    margin-right: 8px;
  }
</style>
